(this["webpackJsonpfirebase-react-auth"]=this["webpackJsonpfirebase-react-auth"]||[]).push([[0],{102:function(e,t,a){},104:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),c=a(23),l=a.n(c),s=a(12),u=a.n(s),o=a(17),i=a(6),m=a(120),p=a(127),d=a(121),E=a(125),b=a(122),f=a(64),h=a.n(f).a.initializeApp({apiKey:"AIzaSyBKa-_lri6ZLnk15OoHHCNMOYSg0bFe7Mk",authDomain:"testreacta.firebaseapp.com",databaseURL:"https://testreacta.firebaseio.com",projectId:"testreacta",storageBucket:"testreacta.appspot.com",messagingSenderId:"197904543101",appId:"1:197904543101:web:18200280638b3a548b3014"}),v=h.firestore(),g=h.auth(),O=r.a.createContext();function j(){return Object(n.useContext)(O)}function w(e){var t=e.children,a=Object(n.useState)(),c=Object(i.a)(a,2),l=c[0],s=c[1],u=Object(n.useState)(!0),o=Object(i.a)(u,2),m=o[0],p=o[1];Object(n.useEffect)((function(){return g.onAuthStateChanged((function(e){s(e),p(!1)}))}),[]);var d={currentUser:l,login:function(e,t){return g.signInWithEmailAndPassword(e,t)},signup:function(e,t){return g.createUserWithEmailAndPassword(e,t)},logout:function(){return g.signOut()},resetPassword:function(e){return g.sendPasswordResetEmail(e)},updateEmail:function(e){return l.updateEmail(e)},updatePassword:function(e){return l.updatePassword(e)}};return r.a.createElement(O.Provider,{value:d},!m&&t)}var x=a(11),S=a(14);function y(){var e=Object(n.useRef)(),t=Object(n.useRef)(),a=Object(n.useRef)(),c=j().signup,l=Object(n.useState)(""),s=Object(i.a)(l,2),f=s[0],h=s[1],v=Object(n.useState)(!1),g=Object(i.a)(v,2),O=g[0],w=g[1],y=Object(x.g)();function N(){return(N=Object(o.a)(u.a.mark((function n(r){return u.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(r.preventDefault(),t.current.value===a.current.value){n.next=3;break}return n.abrupt("return",h("Passwords do not match"));case 3:return n.prev=3,h(""),w(!0),n.next=8,c(e.current.value,t.current.value);case 8:y.push("/"),n.next=14;break;case 11:n.prev=11,n.t0=n.catch(3),h("Failed to create an account");case 14:w(!1);case 15:case"end":return n.stop()}}),n,null,[[3,11]])})))).apply(this,arguments)}return r.a.createElement(r.a.Fragment,null,r.a.createElement(m.a,{className:"d-flex align-items-center justify-content-center",style:{minHeight:"100vh"}},r.a.createElement("div",{className:"w-100",style:{maxWidth:"400px"}},r.a.createElement(p.a,null,r.a.createElement(p.a.Body,null,r.a.createElement("h2",{className:"text-center mb-4"},"Sign Up"),f&&r.a.createElement(d.a,{variant:"danger"},f),r.a.createElement(E.a,{onSubmit:function(e){return N.apply(this,arguments)}},r.a.createElement(E.a.Group,{id:"email"},r.a.createElement(E.a.Label,null,"Email"),r.a.createElement(E.a.Control,{type:"email",ref:e,required:!0})),r.a.createElement(E.a.Group,{id:"password"},r.a.createElement(E.a.Label,null,"Password"),r.a.createElement(E.a.Control,{type:"password",ref:t,required:!0})),r.a.createElement(E.a.Group,{id:"password-confirm"},r.a.createElement(E.a.Label,null,"Password Confirmation"),r.a.createElement(E.a.Control,{type:"password",ref:a,required:!0})),r.a.createElement(b.a,{disabled:O,className:"w-100",type:"submit"},"Sign Up")))),r.a.createElement("div",{className:"w-100 text-center mt-2"},"Already have an account? ",r.a.createElement(S.b,{to:"/login"},"Log In")))))}function N(){var e=Object(n.useState)(""),t=Object(i.a)(e,2),a=t[0],c=t[1],l=j(),s=l.currentUser,E=l.logout,f=Object(x.g)();function h(){return(h=Object(o.a)(u.a.mark((function e(){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return c(""),e.prev=1,e.next=4,E();case 4:f.push("/login"),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(1),c("Failed to log out");case 10:case"end":return e.stop()}}),e,null,[[1,7]])})))).apply(this,arguments)}return r.a.createElement(r.a.Fragment,null,r.a.createElement(m.a,{className:"d-flex align-items-center justify-content-center",style:{minHeight:"100vh"}},r.a.createElement("div",{className:"w-100",style:{maxWidth:"400px"}},r.a.createElement(p.a,null,r.a.createElement(p.a.Body,null,r.a.createElement("h2",{className:"text-center mb-4"},"Profile"),a&&r.a.createElement(d.a,{variant:"danger"},a),r.a.createElement("strong",null,"Email:")," ",s.email,r.a.createElement(S.b,{to:"/update-profile",className:"btn btn-primary w-100 mt-3"},"Update Profile"),r.a.createElement(S.b,{to:"/TagSelection",className:"btn btn-primary w-100 mt-3"},"Select Tags"))),r.a.createElement("div",{className:"w-100 text-center mt-2"},r.a.createElement(b.a,{variant:"link",onClick:function(){return h.apply(this,arguments)}},"Log Out")))))}var A=a(71),P=a(59),k=a(60),_=a(50);function C(){var e=j().currentUser,t=Object(n.useState)("0"),a=Object(i.a)(t,2),c=a[0],l=a[1],s=Object(n.useState)({}),m=Object(i.a)(s,2),p=m[0],d=m[1],E=Object(n.useState)({}),b=Object(i.a)(E,2),f=b[0],h=b[1],g=Object(n.useState)({}),O=Object(i.a)(g,2),w=O[0],x=O[1],S=Object(n.useState)({}),y=Object(i.a)(S,2),N=y[0],C=y[1],R=Object(n.useState)({}),B=Object(i.a)(R,2),I=B[0],F=B[1],T=Object(n.useState)({}),U=Object(i.a)(T,2),L=U[0],H=U[1],D=Object(n.useState)(!0),W=Object(i.a)(D,2),K=W[0],G=W[1],q={"US Elections":p,Health:f,Business:w,Tech:N,Science:I,"World News":L},M={};function J(){return(J=Object(o.a)(u.a.mark((function e(){var t,a,n,r,c,l,s,o,i,m,p,E;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!M.pref.includes("US Elections")){e.next=13;break}return e.prev=1,e.next=4,v.collection("elections").orderBy("publishedAt","desc").limit(10).get();case 4:t=e.sent,a=[],t.forEach((function(e){return a.push(e.data())})),d(a),e.next=13;break;case 10:e.prev=10,e.t0=e.catch(1),console.log(e.t0);case 13:if(!M.pref.includes("Health")){e.next=26;break}return e.prev=14,e.next=17,v.collection("health").orderBy("publishedAt","desc").limit(10).get();case 17:n=e.sent,r=[],n.forEach((function(e){return r.push(e.data())})),h(r),e.next=26;break;case 23:e.prev=23,e.t1=e.catch(14),console.log(e.t1);case 26:if(!M.pref.includes("Business")){e.next=39;break}return e.prev=27,e.next=30,v.collection("business").orderBy("publishedAt","desc").limit(10).get();case 30:c=e.sent,l=[],c.forEach((function(e){return l.push(e.data())})),x(l),e.next=39;break;case 36:e.prev=36,e.t2=e.catch(27),console.log(e.t2);case 39:if(!M.pref.includes("Science")){e.next=52;break}return e.prev=40,e.next=43,v.collection("science").orderBy("publishedAt","desc").limit(10).get();case 43:s=e.sent,o=[],s.forEach((function(e){return o.push(e.data())})),F(o),e.next=52;break;case 49:e.prev=49,e.t3=e.catch(40),console.log(e.t3);case 52:if(!M.pref.includes("Tech")){e.next=65;break}return e.prev=53,e.next=56,v.collection("tech").orderBy("publishedAt","desc").limit(10).get();case 56:i=e.sent,m=[],i.forEach((function(e){return m.push(e.data())})),C(m),e.next=65;break;case 62:e.prev=62,e.t4=e.catch(53),console.log(e.t4);case 65:if(!M.pref.includes("World News")){e.next=78;break}return e.prev=66,e.next=69,v.collection("world").orderBy("publishedAt","desc").limit(10).get();case 69:p=e.sent,E=[],p.forEach((function(e){return E.push(e.data())})),H(E),e.next=78;break;case 75:e.prev=75,e.t5=e.catch(66),console.log(e.t5);case 78:case"end":return e.stop()}}),e,null,[[1,10],[14,23],[27,36],[40,49],[53,62],[66,75]])})))).apply(this,arguments)}return localStorage.getItem("Janus-tags")?M.pref=localStorage.getItem("Janus-tags").split(","):Object(o.a)(u.a.mark((function t(){return u.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,v.collection("userpref").doc(e.email).get();case 3:M=t.sent.data(),t.next=9;break;case 6:t.prev=6,t.t0=t.catch(0),console.log(t.t0);case 9:case"end":return t.stop()}}),t,null,[[0,6]])})))(),Object(n.useEffect)((function(){!function(){J.apply(this,arguments)}(),G(!0)}),[]),r.a.createElement(r.a.Fragment,null,r.a.createElement(A.a,{className:"w-100 pt-5",id:"controlled-tab-example",activeKey:c,onSelect:function(e){return l(e)},defaultActiveKey:"0"},M.pref.map((function(e,t){return r.a.createElement(P.a,{className:"page",eventKey:String(t),title:e},r.a.createElement("div",{className:"page pt-3"},K?Array.isArray(q[e])?q[e].map((function(e,t){return r.a.createElement("div",{className:"pt-1"},r.a.createElement(k.a,{className:"rounded mr-2"},r.a.createElement(_.a,{closeButton:!1},r.a.createElement("strong",{className:"mr-auto"},e.title,"   "),r.a.createElement("small",null,e.publishedAt)),r.a.createElement(k.a.Body,null,e.description,r.a.createElement("br",null),r.a.createElement("br",null),r.a.createElement("small",null,r.a.createElement("strong",null,"Source: "),e.source.name),r.a.createElement("br",null),r.a.createElement("small",null,r.a.createElement("strong",null,"FactCheck: "),String(!e.factCheck)))))})):r.a.createElement("br",null):"Loading"))})),r.a.createElement(P.a,{eventKey:"99"},"FakeNews (dev)")))}a(102);function R(){var e=Object(n.useRef)(),t=Object(n.useRef)(),a=j().login,c=Object(n.useState)(""),l=Object(i.a)(c,2),s=l[0],f=l[1],h=Object(n.useState)(!1),v=Object(i.a)(h,2),g=v[0],O=v[1],w=Object(x.g)();function y(){return(y=Object(o.a)(u.a.mark((function n(r){return u.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return r.preventDefault(),n.prev=1,f(""),O(!0),n.next=6,a(e.current.value,t.current.value);case 6:w.push("/"),n.next=12;break;case 9:n.prev=9,n.t0=n.catch(1),f("Failed to log in");case 12:O(!1);case 13:case"end":return n.stop()}}),n,null,[[1,9]])})))).apply(this,arguments)}return r.a.createElement(r.a.Fragment,null,r.a.createElement(m.a,{className:"d-flex align-items-center justify-content-center",style:{minHeight:"100vh"}},r.a.createElement("div",{className:"w-100",style:{maxWidth:"400px"}},r.a.createElement(p.a,null,r.a.createElement(p.a.Body,null,r.a.createElement("h2",{className:"text-center mb-4"},"Log In"),s&&r.a.createElement(d.a,{variant:"danger"},s),r.a.createElement(E.a,{onSubmit:function(e){return y.apply(this,arguments)}},r.a.createElement(E.a.Group,{id:"email"},r.a.createElement(E.a.Label,null,"Email"),r.a.createElement(E.a.Control,{type:"email",ref:e,required:!0})),r.a.createElement(E.a.Group,{id:"password"},r.a.createElement(E.a.Label,null,"Password"),r.a.createElement(E.a.Control,{type:"password",ref:t,required:!0})),r.a.createElement(b.a,{disabled:g,className:"w-100",type:"submit"},"Log In")),r.a.createElement("div",{className:"w-100 text-center mt-3"},r.a.createElement(S.b,{to:"/forgot-password"},"Forgot Password?")))),r.a.createElement("div",{className:"w-100 text-center mt-2"},"Need an account? ",r.a.createElement(S.b,{to:"/signup"},"Sign Up")))))}var B=a(73),I=a(126),F=a(128),T=a(123);function U(){var e=Object(n.useState)([]),t=Object(i.a)(e,2),a=t[0],c=t[1],l=Object(n.useState)(""),s=Object(i.a)(l,2),p=s[0],E=s[1],f=Object(x.g)(),h=j().currentUser,g=function(){var e=Object(o.a)(u.a.mark((function e(t){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(0!==a.length){e.next=4;break}return e.abrupt("return",alert("at least one selection is required"));case 4:return e.prev=4,E(""),e.next=8,v.collection("userpref").doc(h.email).set({pref:a});case 8:e.sent,localStorage.setItem("Janus-tags",Object(B.a)(a)),f.push("/NewsFeed"),e.next=16;break;case 13:e.prev=13,e.t0=e.catch(4),E("Failed to connect to database");case 16:return e.prev=16,t.currentTarget.disabled=!1,e.finish(16);case 19:case"end":return e.stop()}}),e,null,[[4,13,16,19]])})));return function(t){return e.apply(this,arguments)}}();return r.a.createElement(r.a.Fragment,null,r.a.createElement(m.a,{className:"d-flex align-items-center justify-content-center",style:{minHeight:"100vh"}},r.a.createElement("div",{className:"w-100",style:{maxWidth:"400px"}},r.a.createElement(T.a,null,p&&r.a.createElement(d.a,{variant:"danger"},p),r.a.createElement(F.a,{value:a,onChange:function(e,t){c(t)}},r.a.createElement(I.a,{value:"US Elections"},"US Elections"),r.a.createElement(I.a,{value:"Health"},"Health"),r.a.createElement(I.a,{value:"Business"},"Business"),r.a.createElement(I.a,{value:"Science"},"Science"),r.a.createElement(I.a,{value:"Tech"},"Tech"),r.a.createElement(I.a,{value:"World News"},"World News"))),r.a.createElement(T.a,null,r.a.createElement("div",{className:"text-center mb-4"},"Personalize your feed to continue")),r.a.createElement(T.a,null,r.a.createElement(b.a,{block:"true",size:"lg",variant:"primary",onClick:g},"Confirm")))))}var L=a(74);function H(e){var t=e.component,a=Object(L.a)(e,["component"]),n=j().currentUser;return r.a.createElement(x.b,Object.assign({},a,{render:function(e){return n?r.a.createElement(t,e):r.a.createElement(x.a,{to:"/login"})}}))}function D(){var e=Object(n.useRef)(),t=j().resetPassword,a=Object(n.useState)(""),c=Object(i.a)(a,2),l=c[0],s=c[1],f=Object(n.useState)(""),h=Object(i.a)(f,2),v=h[0],g=h[1],O=Object(n.useState)(!1),w=Object(i.a)(O,2),x=w[0],y=w[1];function N(){return(N=Object(o.a)(u.a.mark((function a(n){return u.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return n.preventDefault(),a.prev=1,g(""),s(""),y(!0),a.next=7,t(e.current.value);case 7:g("Check your inbox for further instructions"),a.next=13;break;case 10:a.prev=10,a.t0=a.catch(1),s("Failed to reset password");case 13:y(!1);case 14:case"end":return a.stop()}}),a,null,[[1,10]])})))).apply(this,arguments)}return r.a.createElement(r.a.Fragment,null,r.a.createElement(m.a,{className:"d-flex align-items-center justify-content-center",style:{minHeight:"100vh"}},r.a.createElement("div",{className:"w-100",style:{maxWidth:"400px"}},r.a.createElement(p.a,null,r.a.createElement(p.a.Body,null,r.a.createElement("h2",{className:"text-center mb-4"},"Password Reset"),l&&r.a.createElement(d.a,{variant:"danger"},l),v&&r.a.createElement(d.a,{variant:"success"},v),r.a.createElement(E.a,{onSubmit:function(e){return N.apply(this,arguments)}},r.a.createElement(E.a.Group,{id:"email"},r.a.createElement(E.a.Label,null,"Email"),r.a.createElement(E.a.Control,{type:"email",ref:e,required:!0})),r.a.createElement(b.a,{disabled:x,className:"w-100",type:"submit"},"Reset Password")),r.a.createElement("div",{className:"w-100 text-center mt-3"},r.a.createElement(S.b,{to:"/login"},"Login")))),r.a.createElement("div",{className:"w-100 text-center mt-2"},"Need an account? ",r.a.createElement(S.b,{to:"/signup"},"Sign Up")))))}function W(){var e=Object(n.useRef)(),t=Object(n.useRef)(),a=Object(n.useRef)(),c=j(),l=c.currentUser,s=c.updatePassword,u=c.updateEmail,o=Object(n.useState)(""),f=Object(i.a)(o,2),h=f[0],v=f[1],g=Object(n.useState)(!1),O=Object(i.a)(g,2),w=O[0],y=O[1],N=Object(x.g)();return r.a.createElement(r.a.Fragment,null,r.a.createElement(m.a,{className:"d-flex align-items-center justify-content-center",style:{minHeight:"100vh"}},r.a.createElement("div",{className:"w-100",style:{maxWidth:"400px"}},r.a.createElement(p.a,null,r.a.createElement(p.a.Body,null,r.a.createElement("h2",{className:"text-center mb-4"},"Update Profile"),h&&r.a.createElement(d.a,{variant:"danger"},h),r.a.createElement(E.a,{onSubmit:function(n){if(n.preventDefault(),t.current.value!==a.current.value)return v("Passwords do not match");var r=[];y(!0),v(""),e.current.value!==l.email&&r.push(u(e.current.value)),t.current.value&&r.push(s(t.current.value)),Promise.all(r).then((function(){N.push("/")})).catch((function(){v("Failed to update account")})).finally((function(){y(!1)}))}},r.a.createElement(E.a.Group,{id:"email"},r.a.createElement(E.a.Label,null,"Email"),r.a.createElement(E.a.Control,{type:"email",ref:e,required:!0,defaultValue:l.email})),r.a.createElement(E.a.Group,{id:"password"},r.a.createElement(E.a.Label,null,"Password"),r.a.createElement(E.a.Control,{type:"password",ref:t,placeholder:"Leave blank to keep the same"})),r.a.createElement(E.a.Group,{id:"password-confirm"},r.a.createElement(E.a.Label,null,"Password Confirmation"),r.a.createElement(E.a.Control,{type:"password",ref:a,placeholder:"Leave blank to keep the same"})),r.a.createElement(b.a,{disabled:w,className:"w-100",type:"submit"},"Update")))),r.a.createElement("div",{className:"w-100 text-center mt-2"},r.a.createElement(S.b,{to:"/"},"Cancel")))))}var K=function(){return r.a.createElement(m.a,{className:"d-flex align-items-center "},r.a.createElement("div",{className:"w-100"},r.a.createElement(S.a,null,r.a.createElement(w,null,r.a.createElement(x.d,null,r.a.createElement(H,{exact:!0,path:"/",component:N}),r.a.createElement(H,{path:"/update-profile",component:W}),r.a.createElement(H,{path:"/TagSelection",component:U}),r.a.createElement(H,{path:"/NewsFeed",component:C}),r.a.createElement(x.b,{path:"/signup",component:y}),r.a.createElement(x.b,{path:"/login",component:R}),r.a.createElement(x.b,{path:"/forgot-password",component:D}))))))};a(103);console.log(Object({NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,REACT_APP_FIREBASE_API_KEY:"AIzaSyBKa-_lri6ZLnk15OoHHCNMOYSg0bFe7Mk",REACT_APP_FIREBASE_APP_ID:"1:197904543101:web:18200280638b3a548b3014",REACT_APP_FIREBASE_AUTH_DOMAIN:"testreacta.firebaseapp.com",REACT_APP_FIREBASE_DATABASE_URL:"https://testreacta.firebaseio.com",REACT_APP_FIREBASE_MESSAGING_SENDER_ID:"197904543101",REACT_APP_FIREBASE_PROJECT_ID:"testreacta",REACT_APP_FIREBASE_STORAGE_BUCKET:"testreacta.appspot.com"}).REACT_APP_API_KEY),l.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(K,null)),document.getElementById("root"))},80:function(e,t,a){e.exports=a(104)}},[[80,1,2]]]);
//# sourceMappingURL=main.9d8db6bd.chunk.js.map